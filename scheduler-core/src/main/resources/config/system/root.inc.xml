<!-- root Logging configuration -->
<included>

	<!-- Default console appender -->
	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>${DEFAULT_PATTERN}</pattern>
		</encoder>
		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
	    	<level>ERROR</level>
	    </filter>
	</appender>

	<!-- Root log file appender -->
	<appender name="ROOT" class="ch.qos.logback.core.FileAppender">
		<file>${LOG_DIR}/root.log</file>
		<append>false</append>
		<encoder>
			<pattern>${DEFAULT_PATTERN}</pattern>
		</encoder>
		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
	    	<level>ERROR</level>
	    </filter>
	</appender>
	
	<!-- Thread based log appender -->
	<appender name="THREADS" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator class="io.coursescheduler.util.logging.ThreadNameBasedLoggingEventDiscriminator" />
        <sift>
            <appender name="THREAD-${threadName}" class="ch.qos.logback.core.FileAppender">
                <file>${LOG_DIR}/io.coursescheduler/threads/${threadName}.log</file>
				<append>false</append>
				<encoder>
					<pattern>${DEFAULT_PATTERN}</pattern>
				</encoder>
            </appender>
        </sift>
    </appender>
	
	<!-- Root Logger -->
	<root level="info">
		<appender-ref ref="STDOUT" />
		<appender-ref ref="ROOT" />
		<appender-ref ref="THREADS" />
	</root>
	
</included>